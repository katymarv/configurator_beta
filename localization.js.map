{"version":3,"file":"localization.js","sources":["../src/js/ConfigStorage.js","../src/js/localization.js"],"sourcesContent":["/**\n * Gets one or more items from localStorage\n * @param {string | string[]} key string or array of strings\n * @returns {object}\n */\nexport function get(key, defaultValue = null) {\n  let result = {};\n  if (Array.isArray(key)) {\n    key.forEach(function (element) {\n      try {\n        result = { ...result, ...JSON.parse(localStorage.getItem(element)) };\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  } else {\n    const keyValue = localStorage.getItem(key);\n    if (keyValue) {\n      try {\n        result = JSON.parse(keyValue);\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  }\n\n  // if default value is set and key is not found in localStorage, set default value\n  if (!Object.keys(result).length && defaultValue !== null) {\n    console.log('setting default value for', key, defaultValue);\n    result[key] = defaultValue;\n  }\n\n  return result;\n}\n\n/**\n * Save dictionary of key/value pairs to localStorage\n * @param {object} input object which keys are strings and values are serializable objects\n */\nexport function set(input) {\n  Object.keys(input).forEach(function (element) {\n    const tmpObj = {};\n    tmpObj[element] = input[element];\n    try {\n      localStorage.setItem(element, JSON.stringify(tmpObj));\n    } catch (e) {\n      console.error(e);\n    }\n  });\n}\n\n/**\n * Remove item from localStorage\n * @param {string} item key to remove from storage\n */\nexport function remove(item) {\n  localStorage.removeItem(item);\n}\n\n/**\n * Clear localStorage\n */\nexport function clear() {\n  localStorage.clear();\n}\n\n/**\n * @deprecated this is a temporary solution to allow the use of the ConfigStorage module in old way\n */\nconst ConfigStorage = {\n  get,\n  set,\n  remove,\n  clear,\n};\nwindow.ConfigStorage = ConfigStorage;\n","import i18next from 'i18next';\nimport i18nextXHRBackend from 'i18next-xhr-backend';\nimport { gui_log } from './gui_log.js';\nimport { get as getConfig, set as setConfig } from './ConfigStorage.js';\nimport $ from \"jquery\";\n\nconst i18n = {};\n/*\n * Wrapper around the i18n system\n */\nwindow.i18n = i18n;\n\n\nconst languagesAvailables = ['ca', 'da', 'de', 'en', 'es', 'eu', 'fr', 'gl', 'it', 'ja', 'ko', 'nl', 'pt', 'pt_BR', 'pl', 'ru', 'uk', 'zh_CN', 'zh_TW'];\n\nconst languageFallback = {\n                            'pt': ['pt_BR', 'en'],\n                            'pt_BR': ['pt', 'en'],\n                            'default': ['en'],\n};\n\n/**\n * Functions that depend on the i18n framework\n */\ni18n.init = function(cb) {\n    getStoredUserLocale(function(userLanguage) {\n\n        i18next\n            .use(i18nextXHRBackend)\n            .init({\n                lng: userLanguage,\n                getAsync: false,\n                debug: true,\n                ns: ['messages'],\n                defaultNS:['messages'],\n                fallbackLng: languageFallback,\n                backend: {\n                    loadPath: './locales/{{lng}}/{{ns}}.json',\n                    parse: i18n.parseInputFile,\n                },\n            },\n            function(err) {\n                if (err !== undefined) {\n                    console.error(`Error loading i18n: ${err}`);\n                } else {\n                    console.log('i18n system loaded');\n                    const detectedLanguage = i18n.getMessage(`language_${getValidLocale(\"DEFAULT\")}`);\n                    i18n.addResources({\"detectedLanguage\": detectedLanguage });\n                    i18next.on('languageChanged', function () {\n                        i18n.localizePage(true);\n                    });\n                }\n                if (cb !== undefined) {\n                    cb();\n                }\n            });\n    });\n\n};\n\n/**\n * We have different interpolate methods in the input messages file,\n * we unify all of them here to the i18next style and simplify it\n */\ni18n.parseInputFile = function(data) {\n\n    // Remove the $n interpolate of Chrome $1, $2, ... -> {{1}}, {{2}}, ...\n    const REGEXP_CHROME = /\\$([1-9])/g;\n    const dataChrome = data.replace(REGEXP_CHROME, '{{$1}}');\n\n    // Remove the .message of the nesting $t(xxxxx.message) -> $t(xxxxx)\n    const REGEXP_NESTING = /\\$t\\(([^\\)]*).message\\)/g;\n    const dataNesting = dataChrome.replace(REGEXP_NESTING, '$t($1)');\n\n    // Move the .message of the json object to root xxxxx.message -> xxxxx\n    const jsonData = JSON.parse(dataNesting);\n    Object.entries(jsonData).forEach(([key, value]) => {\n        jsonData[key] = value.message;\n    });\n\n    return jsonData;\n};\n\ni18n.changeLanguage = function(languageSelected) {\n    setConfig({'userLanguageSelect': languageSelected});\n    i18next.changeLanguage(getValidLocale(languageSelected));\n    i18n.selectedLanguage = languageSelected;\n    gui_log(i18n.getMessage('language_changed'));\n};\n\ni18n.getMessage = function(messageID, parameters) {\n\n    let parametersObject;\n\n    // Option 1, no parameters or Object as parameters (i18Next type parameters)\n    if ((parameters === undefined) || ((parameters.constructor !== Array) && (parameters instanceof Object))) {\n        parametersObject = parameters;\n\n    // Option 2: parameters as $1, $2, etc.\n    // (deprecated, from the old Chrome i18n\n    } else {\n\n        // Convert the input to an array\n        let parametersArray = parameters;\n        if (parametersArray.constructor !== Array) {\n            parametersArray = [parameters];\n        }\n\n        parametersObject = {};\n        parametersArray.forEach(function(parameter, index) {\n            parametersObject[index + 1] = parameter;\n        });\n    }\n\n    return i18next.t(messageID, parametersObject);\n};\n\ni18n.getLanguagesAvailables = function() {\n    return languagesAvailables;\n};\n\ni18n.getCurrentLocale = function() {\n    return i18next.language;\n};\n\ni18n.existsMessage = function(key) {\n    return i18next.exists(key);\n};\n\n/**\n * Helper functions, don't depend of the i18n framework\n */\n\ni18n.localizePage = function(forceReTranslate) {\n\n    let localized = 0;\n\n    const translate = function(messageID) {\n        localized++;\n        return i18n.getMessage(messageID);\n    };\n\n    if (forceReTranslate) {\n        $('[i18n]').each(function() {\n            const element = $(this);\n            element.html(translate(element.attr('i18n')));\n        });\n        $('[i18n_title]').each(function() {\n            const element = $(this);\n            element.attr('title', translate(element.attr('i18n_title')));\n        });\n        $('[i18n_value]').each(function() {\n            const element = $(this);\n            element.val(translate(element.attr('i18n_value')));\n        });\n        $('[i18n_placeholder]').each(function() {\n            const element = $(this);\n            element.attr('placeholder', translate(element.attr('i18n_placeholder')));\n        });\n    } else {\n\n        $('[i18n]:not(.i18n-replaced)').each(function() {\n            const element = $(this);\n            element.html(translate(element.attr('i18n')));\n            element.addClass('i18n-replaced');\n        });\n\n        $('[i18n_title]:not(.i18n_title-replaced)').each(function() {\n            const element = $(this);\n            element.attr('title', translate(element.attr('i18n_title')));\n            element.addClass('i18n_title-replaced');\n        });\n\n        $('[i18n_value]:not(.i18n_value-replaced)').each(function() {\n            const element = $(this);\n            element.val(translate(element.attr('i18n_value')));\n            element.addClass('i18n_value-replaced');\n        });\n\n        $('[i18n_placeholder]:not(.i18n_placeholder-replaced)').each(function() {\n            const element = $(this);\n            element.attr('placeholder', translate(element.attr('i18n_placeholder')));\n            element.addClass('i18n_placeholder-replaced');\n        });\n    }\n    return localized;\n};\n\n/*\n * Reads the chrome config, if DEFAULT or there is no config stored,\n * returns the current locale to the callback\n */\nfunction getStoredUserLocale(cb) {\n    let userLanguage = 'DEFAULT';\n    const result = getConfig('userLanguageSelect');\n    if (result.userLanguageSelect) {\n        userLanguage = result.userLanguageSelect;\n    }\n    i18n.selectedLanguage = userLanguage;\n    userLanguage = getValidLocale(userLanguage);\n    cb(userLanguage);\n}\n\nfunction getValidLocale(userLocale) {\n\n    let validUserLocale = userLocale;\n    if (validUserLocale === 'DEFAULT') {\n        validUserLocale = window.navigator.userLanguage || window.navigator.language;\n        console.log(`Detected locale ${validUserLocale}`);\n\n        // The i18next can fallback automatically to the dialect, but needs to be used with hyphen and\n        // we use underscore because the eventPage.js uses Chrome localization that needs underscore.\n        // If at some moment we get rid of the Chrome localization we can remove all of this\n        validUserLocale = validUserLocale.replace('-','_');\n        // Locale not found\n        if (languagesAvailables.indexOf(validUserLocale) === -1) {\n            // Is a composite locale?\n            const underscorePosition = validUserLocale.indexOf('_');\n            if (underscorePosition !== -1) {\n                validUserLocale = validUserLocale.substring(0, underscorePosition);\n                // Locale dialect fallback not found\n                if (languagesAvailables.indexOf(validUserLocale) === -1) {\n                    validUserLocale = 'en'; // Fallback language\n                }\n            } else {\n                validUserLocale = 'en';\n            }\n        }\n    }\n\n    return validUserLocale;\n}\n\ni18n.addResources = function(bundle) {\n    const takeFirst = obj => obj.hasOwnProperty(\"length\") && 0 < obj.length ? obj[0] : obj;\n    const lang = takeFirst(i18next.options.fallbackLng['default']);\n    const ns = takeFirst(i18next.options.defaultNS);\n    i18next.addResourceBundle(lang, ns, bundle, true, true);\n};\n\nexport { i18n };\n"],"names":["i18nextXHRBackend","setConfig","getConfig"],"mappings":"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"}