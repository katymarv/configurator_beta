{"version":3,"file":"dns-txt.js","sources":["../node_modules/dns-txt/index.js"],"sourcesContent":["'use strict'\n\nvar bindexOf = require('buffer-indexof')\n\nvar equalSign = new Buffer('=')\n\nmodule.exports = function (opts) {\n  var binary = opts ? opts.binary : false\n  var that = {}\n\n  that.encode = function (data, buf, offset) {\n    if (!data) data = {}\n    if (!offset) offset = 0\n    if (!buf) buf = new Buffer(that.encodingLength(data) + offset)\n\n    var oldOffset = offset\n    var keys = Object.keys(data)\n\n    if (keys.length === 0) {\n      buf[offset] = 0\n      offset++\n    }\n\n    keys.forEach(function (key) {\n      var val = data[key]\n      var oldOffset = offset\n      offset++\n\n      if (val === true) {\n        offset += buf.write(key, offset)\n      } else if (Buffer.isBuffer(val)) {\n        offset += buf.write(key + '=', offset)\n        var len = val.length\n        val.copy(buf, offset, 0, len)\n        offset += len\n      } else {\n        offset += buf.write(key + '=' + val, offset)\n      }\n\n      buf[oldOffset] = offset - oldOffset - 1\n    })\n\n    that.encode.bytes = offset - oldOffset\n    return buf\n  }\n\n  that.decode = function (buf, offset, len) {\n    if (!offset) offset = 0\n    if (!Number.isFinite(len)) len = buf.length\n    var data = {}\n    var oldOffset = offset\n\n    while (offset < len) {\n      var b = decodeBlock(buf, offset)\n      var i = bindexOf(b, equalSign)\n      offset += decodeBlock.bytes\n\n      if (b.length === 0) continue // ignore: most likely a single zero byte\n      if (i === -1) data[b.toString().toLowerCase()] = true\n      else if (i === 0) continue // ignore: invalid key-length\n      else {\n        var key = b.slice(0, i).toString().toLowerCase()\n        if (key in data) continue // ignore: overwriting not allowed\n        data[key] = binary ? b.slice(i + 1) : b.slice(i + 1).toString()\n      }\n    }\n\n    that.decode.bytes = offset - oldOffset\n    return data\n  }\n\n  that.encodingLength = function (data) {\n    if (!data) return 1 // 1 byte (single empty byte)\n    var keys = Object.keys(data)\n    if (keys.length === 0) return 1 // 1 byte (single empty byte)\n    return keys.reduce(function (total, key) {\n      var val = data[key]\n      total += Buffer.byteLength(key) + 1 // +1 byte to store field length\n      if (Buffer.isBuffer(val)) total += val.length + 1 // +1 byte to fit equal sign\n      else if (val !== true) total += Buffer.byteLength(String(val)) + 1 // +1 byte to fit equal sign\n      return total\n    }, 0)\n  }\n\n  return that\n}\n\nfunction decodeBlock (buf, offset) {\n  var len = buf[offset]\n  var to = offset + 1 + len\n  var b = buf.slice(offset + 1, to > buf.length ? buf.length : to)\n  decodeBlock.bytes = len + 1\n  return b\n}\n"],"names":["require$$0"],"mappings":"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","x_google_ignoreList":[0]}