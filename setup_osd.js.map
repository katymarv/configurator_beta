{"version":3,"file":"setup_osd.js","sources":["../src/js/tabs/setup_osd.js"],"sourcesContent":["import { i18n } from \"../localization\";\nimport GUI, { TABS } from '../gui';\nimport MSP from \"../msp\";\nimport MSPCodes from \"../msp/MSPCodes\";\nimport { gui_log } from \"../gui_log\";\nimport $ from 'jquery';\n\nconst setup_osd = {\n};\n\nsetup_osd.initialize = function (callback) {\n\n    if (GUI.active_tab != 'setup_osd') {\n        GUI.active_tab = 'setup_osd';\n    }\n\n    function load_status() {\n        MSP.send_message(MSPCodes.MSP_STATUS, false, false, load_html);\n    }\n\n    function load_html() {\n        $('#content').load(\"./tabs/setup_osd.html\", process_html);\n    }\n\n    load_status();\n\n    function process_html() {\n\n        $('.tab-setup-osd .info').hide(); // requires an MSP update\n/*      Only used by get_slow_data() which is commented out.\n        const osdVideoModes = new Set([\n            'AUTO',\n            'NTSC',\n            'PAL'\n        ]);\n*/\n        // translate to user-selected language\n        i18n.localizePage();\n\n        $('a.resetSettings').click(function () {\n            MSP.send_message(MSPCodes.MSP_RESET_CONF, false, false, function () {\n                gui_log(i18n.getMessage('initialSetupSettingsRestored'));\n\n                GUI.tab_switch_cleanup(function () {\n                    TABS.setup_osd.initialize();\n                });\n            });\n        });\n\n        function get_slow_data() {\n            /* FIXME requires MSP update\n            MSP.send_message(MSPCodes.MSP_OSD_VIDEO_STATUS, false, false, function () {\n                let element element = $('.video-mode');\n                const osdVideoMode = osdVideoModes[OSD_VIDEO_STATE.video_mode];\n                element.text(osdVideoMode);\n\n                element = $('.camera-connected');\n                element.text(OSD_VIDEO_STATE.camera_connected ? i18n.getMessage('yes') : i18n.getMessage('No'));\n            });\n            */\n        }\n\n        GUI.interval_add('setup_data_pull_slow', get_slow_data, 250, true); // 4 fps\n\n        GUI.content_ready(callback);\n    }\n};\n\nsetup_osd.cleanup = function (callback) {\n    if (callback) callback();\n};\n\nTABS.setup_osd = setup_osd;\nexport {\n    setup_osd,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOK,MAAC,SAAS,GAAG;AAClB,EAAE;AACF;AACA,SAAS,CAAC,UAAU,GAAG,UAAU,QAAQ,EAAE;AAC3C;AACA,IAAI,IAAI,GAAG,CAAC,UAAU,IAAI,WAAW,EAAE;AACvC,QAAQ,GAAG,CAAC,UAAU,GAAG,WAAW,CAAC;AACrC,KAAK;AACL;AACA,IAAI,SAAS,WAAW,GAAG;AAC3B,QAAQ,GAAG,CAAC,YAAY,CAAC,QAAQ,CAAC,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;AACvE,KAAK;AACL;AACA,IAAI,SAAS,SAAS,GAAG;AACzB,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,uBAAuB,EAAE,YAAY,CAAC,CAAC;AAClE,KAAK;AACL;AACA,IAAI,WAAW,EAAE,CAAC;AAClB;AACA,IAAI,SAAS,YAAY,GAAG;AAC5B;AACA,QAAQ,CAAC,CAAC,sBAAsB,CAAC,CAAC,IAAI,EAAE,CAAC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,IAAI,CAAC,YAAY,EAAE,CAAC;AAC5B;AACA,QAAQ,CAAC,CAAC,iBAAiB,CAAC,CAAC,KAAK,CAAC,YAAY;AAC/C,YAAY,GAAG,CAAC,YAAY,CAAC,QAAQ,CAAC,cAAc,EAAE,KAAK,EAAE,KAAK,EAAE,YAAY;AAChF,gBAAgB,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,8BAA8B,CAAC,CAAC,CAAC;AACzE;AACA,gBAAgB,GAAG,CAAC,kBAAkB,CAAC,YAAY;AACnD,oBAAoB,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,CAAC;AAChD,iBAAiB,CAAC,CAAC;AACnB,aAAa,CAAC,CAAC;AACf,SAAS,CAAC,CAAC;AACX;AACA,QAAQ,SAAS,aAAa,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,QAAQ,GAAG,CAAC,YAAY,CAAC,sBAAsB,EAAE,aAAa,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;AAC3E;AACA,QAAQ,GAAG,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AACpC,KAAK;AACL,CAAC,CAAC;AACF;AACA,SAAS,CAAC,OAAO,GAAG,UAAU,QAAQ,EAAE;AACxC,IAAI,IAAI,QAAQ,EAAE,QAAQ,EAAE,CAAC;AAC7B,CAAC,CAAC;AACF;AACA,IAAI,CAAC,SAAS,GAAG,SAAS;;;;"}