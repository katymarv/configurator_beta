{"version":3,"file":"generate_filename.js","sources":["../src/js/utils/generate_filename.js"],"sourcesContent":["import semver from \"semver\";\nimport FC from \"../fc\";\nimport { API_VERSION_1_45 } from \"../data_storage\";\n\nfunction zeroPad(value, width) {\n    let valuePadded = String(value);\n\n    while (valuePadded.length < width) {\n        valuePadded = `0${value}`;\n    }\n\n    return valuePadded;\n}\n\nexport function generateFilename(prefix, suffix) {\n    const date = new Date();\n    const yyyymmdd = `${date.getFullYear()}${zeroPad(date.getMonth() + 1, 2)}${zeroPad(date.getDate(), 2)}`;\n    const hhmmss = `${zeroPad(date.getHours(), 2)}${zeroPad(date.getMinutes(), 2)}${zeroPad(date.getSeconds(), 2)}`;\n    const craftName = semver.gte(FC.CONFIG.apiVersion, API_VERSION_1_45) ? FC.CONFIG.craftName : FC.CONFIG.name;\n    let filename = `${FC.CONFIG.flightControllerIdentifier || 'UNKNOWN'}_${prefix}`;\n\n    if (craftName.length) {\n        filename += `_${craftName.trim().replace(\" \", \"_\").toUpperCase()}`;\n    }\n\n    filename += `_${yyyymmdd}_${hhmmss}`;\n\n    if (FC.CONFIG.boardName) {\n        filename += `_${FC.CONFIG.boardName}`;\n    }\n\n    return `${filename}.${suffix}`;\n}\n"],"names":[],"mappings":";;;AAIA,SAAS,OAAO,CAAC,KAAK,EAAE,KAAK,EAAE;AAC/B,IAAI,IAAI,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;AACpC;AACA,IAAI,OAAO,WAAW,CAAC,MAAM,GAAG,KAAK,EAAE;AACvC,QAAQ,WAAW,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;AAClC,KAAK;AACL;AACA,IAAI,OAAO,WAAW,CAAC;AACvB,CAAC;AACD;AACO,SAAS,gBAAgB,CAAC,MAAM,EAAE,MAAM,EAAE;AACjD,IAAI,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;AAC5B,IAAI,MAAM,QAAQ,GAAG,CAAC,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5G,IAAI,MAAM,MAAM,GAAG,CAAC,EAAE,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACpH,IAAI,MAAM,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,MAAM,CAAC,UAAU,EAAE,gBAAgB,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,SAAS,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC;AAChH,IAAI,IAAI,QAAQ,GAAG,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,0BAA0B,IAAI,SAAS,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC;AACpF;AACA,IAAI,IAAI,SAAS,CAAC,MAAM,EAAE;AAC1B,QAAQ,QAAQ,IAAI,CAAC,CAAC,EAAE,SAAS,CAAC,IAAI,EAAE,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;AAC3E,KAAK;AACL;AACA,IAAI,QAAQ,IAAI,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC;AACzC;AACA,IAAI,IAAI,EAAE,CAAC,MAAM,CAAC,SAAS,EAAE;AAC7B,QAAQ,QAAQ,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;AAC9C,KAAK;AACL;AACA,IAAI,OAAO,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC;AACnC;;;;"}