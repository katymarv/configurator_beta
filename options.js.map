{"version":3,"file":"options.js","sources":["../src/js/tabs/options.js"],"sourcesContent":["import { i18n } from '../localization';\nimport GUI, { TABS } from '../gui';\nimport { get as getConfig, set as setConfig } from '../ConfigStorage';\nimport PortHandler from '../port_handler';\nimport CliAutoComplete from '../CliAutoComplete';\nimport DarkTheme, { setDarkTheme } from '../DarkTheme';\nimport { checkForConfiguratorUpdates } from '../utils/checkForConfiguratorUpdates';\nimport { checkSetupAnalytics } from '../Analytics';\nimport $ from 'jquery';\nimport CONFIGURATOR from '../data_storage';\n\nconst options = {};\noptions.initialize = function (callback) {\n    if (GUI.active_tab !== 'options') {\n        GUI.active_tab = 'options';\n    }\n\n    $('#content').load(\"./tabs/options.html\", function () {\n        i18n.localizePage();\n\n        TABS.options.initRememberLastTab();\n        TABS.options.initCheckForConfiguratorUnstableVersions();\n        TABS.options.initAnalyticsOptOut();\n        TABS.options.initCliAutoComplete();\n        TABS.options.initShowAllSerialDevices();\n        TABS.options.initUseMdnsBrowser();\n        TABS.options.initShowVirtualMode();\n        TABS.options.initCordovaForceComputerUI();\n        TABS.options.initDarkTheme();\n        TABS.options.initShowDevToolsOnStartup();\n\n        TABS.options.initShowWarnings();\n\n        GUI.content_ready(callback);\n    });\n};\n\noptions.cleanup = function (callback) {\n    if (callback) {\n        callback();\n    }\n};\n\noptions.initShowWarnings = function () {\n    const result = getConfig('showPresetsWarningBackup');\n    if (result.showPresetsWarningBackup) {\n        $('div.presetsWarningBackup input').prop('checked', true);\n    }\n\n    $('div.presetsWarningBackup input').change(function () {\n        const checked = $(this).is(':checked');\n        setConfig({'showPresetsWarningBackup': checked});\n    }).change();\n};\n\noptions.initRememberLastTab = function () {\n    const result = getConfig('rememberLastTab');\n    $('div.rememberLastTab input')\n        .prop('checked', !!result.rememberLastTab)\n        .change(function() { setConfig({rememberLastTab: $(this).is(':checked')}); })\n        .change();\n};\n\noptions.initCheckForConfiguratorUnstableVersions = function () {\n    const result = getConfig('checkForConfiguratorUnstableVersions');\n    if (result.checkForConfiguratorUnstableVersions) {\n        $('div.checkForConfiguratorUnstableVersions input').prop('checked', true);\n    }\n\n    $('div.checkForConfiguratorUnstableVersions input').change(function () {\n        const checked = $(this).is(':checked');\n\n        setConfig({'checkForConfiguratorUnstableVersions': checked});\n\n        checkForConfiguratorUpdates();\n    });\n};\n\noptions.initAnalyticsOptOut = function () {\n    const result = getConfig('analyticsOptOut');\n    if (result.analyticsOptOut) {\n        $('div.analyticsOptOut input').prop('checked', true);\n    }\n\n    $('div.analyticsOptOut input').change(function () {\n        const checked = $(this).is(':checked');\n\n        setConfig({'analyticsOptOut': checked});\n\n        checkSetupAnalytics(function (analyticsService) {\n            if (checked) {\n                analyticsService.sendEvent(analyticsService.EVENT_CATEGORIES.APPLICATION, 'OptOut');\n            }\n\n            analyticsService.setOptOut(checked);\n\n            if (!checked) {\n                analyticsService.sendEvent(analyticsService.EVENT_CATEGORIES.APPLICATION, 'OptIn');\n            }\n        });\n    }).change();\n};\n\noptions.initCliAutoComplete = function () {\n    $('div.cliAutoComplete input')\n        .prop('checked', CliAutoComplete.configEnabled)\n        .change(function () {\n            const checked = $(this).is(':checked');\n\n            setConfig({'cliAutoComplete': checked});\n            CliAutoComplete.setEnabled(checked);\n        }).change();\n};\n\noptions.initAutoConnectConnectionTimeout = function () {\n    const result = getConfig('connectionTimeout');\n    if (result.connectionTimeout) {\n        $('#connectionTimeoutSelect').val(result.connectionTimeout);\n    }\n    $('#connectionTimeoutSelect').on('change', function () {\n        const value = parseInt($(this).val());\n        setConfig({'connectionTimeout': value});\n    });\n};\n\noptions.initShowAllSerialDevices = function() {\n    const showAllSerialDevicesElement = $('div.showAllSerialDevices input');\n    const result = getConfig('showAllSerialDevices');\n    showAllSerialDevicesElement\n        .prop('checked', !!result.showAllSerialDevices)\n        .on('change', () => {\n            setConfig({ showAllSerialDevices: showAllSerialDevicesElement.is(':checked') });\n            PortHandler.reinitialize();\n        });\n};\n\noptions.initShowVirtualMode = function() {\n    const showVirtualModeElement = $('div.showVirtualMode input');\n    const result = getConfig('showVirtualMode');\n    showVirtualModeElement\n        .prop('checked', !!result.showVirtualMode)\n        .on('change', () => {\n            setConfig({ showVirtualMode: showVirtualModeElement.is(':checked') });\n            PortHandler.reinitialize();\n        });\n};\n\noptions.initUseMdnsBrowser = function() {\n    const useMdnsBrowserElement = $('div.useMdnsBrowser input');\n    const result = getConfig('useMdnsBrowser');\n    useMdnsBrowserElement\n        .prop('checked', !!result.useMdnsBrowser)\n        .on('change', () => {\n            setConfig({ useMdnsBrowser: useMdnsBrowserElement.is(':checked') });\n            PortHandler.reinitialize();\n        });\n};\n\noptions.initCordovaForceComputerUI = function () {\n    if (GUI.isCordova() && cordovaUI.canChangeUI) {\n        const result = getConfig('cordovaForceComputerUI');\n        if (result.cordovaForceComputerUI) {\n            $('div.cordovaForceComputerUI input').prop('checked', true);\n        }\n\n        $('div.cordovaForceComputerUI input').change(function () {\n            const checked = $(this).is(':checked');\n\n            setConfig({'cordovaForceComputerUI': checked});\n\n            if (typeof cordovaUI.set === 'function') {\n                cordovaUI.set();\n            }\n        });\n    } else {\n        $('div.cordovaForceComputerUI').hide();\n    }\n};\n\noptions.initDarkTheme = function () {\n    $('#darkThemeSelect')\n        .val(DarkTheme.configSetting)\n        .change(function () {\n            const value = parseInt($(this).val());\n\n            setConfig({'darkTheme': value});\n            setDarkTheme(value);\n        }).change();\n};\n\noptions.initShowDevToolsOnStartup = function () {\n    if (!(CONFIGURATOR.isDevVersion() && GUI.isNWJS())) {\n        $('div.showDevToolsOnStartup').hide();\n        return;\n    }\n    const result = getConfig('showDevToolsOnStartup');\n    $('div.showDevToolsOnStartup input')\n        .prop('checked', !!result.showDevToolsOnStartup)\n        .change(function () { setConfig({ showDevToolsOnStartup: $(this).is(':checked') }); })\n        .change();\n};\n\n// TODO: remove when modules are in place\nTABS.options = options;\nexport { options };\n"],"names":["getConfig","setConfig"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWK,MAAC,OAAO,GAAG,GAAG;AACnB,OAAO,CAAC,UAAU,GAAG,UAAU,QAAQ,EAAE;AACzC,IAAI,IAAI,GAAG,CAAC,UAAU,KAAK,SAAS,EAAE;AACtC,QAAQ,GAAG,CAAC,UAAU,GAAG,SAAS,CAAC;AACnC,KAAK;AACL;AACA,IAAI,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,YAAY;AAC1D,QAAQ,IAAI,CAAC,YAAY,EAAE,CAAC;AAC5B;AACA,QAAQ,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAE,CAAC;AAC3C,QAAQ,IAAI,CAAC,OAAO,CAAC,wCAAwC,EAAE,CAAC;AAChE,QAAQ,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAE,CAAC;AAC3C,QAAQ,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAE,CAAC;AAC3C,QAAQ,IAAI,CAAC,OAAO,CAAC,wBAAwB,EAAE,CAAC;AAChD,QAAQ,IAAI,CAAC,OAAO,CAAC,kBAAkB,EAAE,CAAC;AAC1C,QAAQ,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAE,CAAC;AAC3C,QAAQ,IAAI,CAAC,OAAO,CAAC,0BAA0B,EAAE,CAAC;AAClD,QAAQ,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;AACrC,QAAQ,IAAI,CAAC,OAAO,CAAC,yBAAyB,EAAE,CAAC;AACjD;AACA,QAAQ,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE,CAAC;AACxC;AACA,QAAQ,GAAG,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AACpC,KAAK,CAAC,CAAC;AACP,CAAC,CAAC;AACF;AACA,OAAO,CAAC,OAAO,GAAG,UAAU,QAAQ,EAAE;AACtC,IAAI,IAAI,QAAQ,EAAE;AAClB,QAAQ,QAAQ,EAAE,CAAC;AACnB,KAAK;AACL,CAAC,CAAC;AACF;AACA,OAAO,CAAC,gBAAgB,GAAG,YAAY;AACvC,IAAI,MAAM,MAAM,GAAGA,GAAS,CAAC,0BAA0B,CAAC,CAAC;AACzD,IAAI,IAAI,MAAM,CAAC,wBAAwB,EAAE;AACzC,QAAQ,CAAC,CAAC,gCAAgC,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAClE,KAAK;AACL;AACA,IAAI,CAAC,CAAC,gCAAgC,CAAC,CAAC,MAAM,CAAC,YAAY;AAC3D,QAAQ,MAAM,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AAC/C,QAAQC,GAAS,CAAC,CAAC,0BAA0B,EAAE,OAAO,CAAC,CAAC,CAAC;AACzD,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC;AAChB,CAAC,CAAC;AACF;AACA,OAAO,CAAC,mBAAmB,GAAG,YAAY;AAC1C,IAAI,MAAM,MAAM,GAAGD,GAAS,CAAC,iBAAiB,CAAC,CAAC;AAChD,IAAI,CAAC,CAAC,2BAA2B,CAAC;AAClC,SAAS,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,MAAM,CAAC,eAAe,CAAC;AAClD,SAAS,MAAM,CAAC,WAAW,EAAEC,GAAS,CAAC,CAAC,eAAe,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACrF,SAAS,MAAM,EAAE,CAAC;AAClB,CAAC,CAAC;AACF;AACA,OAAO,CAAC,wCAAwC,GAAG,YAAY;AAC/D,IAAI,MAAM,MAAM,GAAGD,GAAS,CAAC,sCAAsC,CAAC,CAAC;AACrE,IAAI,IAAI,MAAM,CAAC,oCAAoC,EAAE;AACrD,QAAQ,CAAC,CAAC,gDAAgD,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAClF,KAAK;AACL;AACA,IAAI,CAAC,CAAC,gDAAgD,CAAC,CAAC,MAAM,CAAC,YAAY;AAC3E,QAAQ,MAAM,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AAC/C;AACA,QAAQC,GAAS,CAAC,CAAC,sCAAsC,EAAE,OAAO,CAAC,CAAC,CAAC;AACrE;AACA,QAAQ,2BAA2B,EAAE,CAAC;AACtC,KAAK,CAAC,CAAC;AACP,CAAC,CAAC;AACF;AACA,OAAO,CAAC,mBAAmB,GAAG,YAAY;AAC1C,IAAI,MAAM,MAAM,GAAGD,GAAS,CAAC,iBAAiB,CAAC,CAAC;AAChD,IAAI,IAAI,MAAM,CAAC,eAAe,EAAE;AAChC,QAAQ,CAAC,CAAC,2BAA2B,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAC7D,KAAK;AACL;AACA,IAAI,CAAC,CAAC,2BAA2B,CAAC,CAAC,MAAM,CAAC,YAAY;AACtD,QAAQ,MAAM,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AAC/C;AACA,QAAQC,GAAS,CAAC,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC,CAAC;AAChD;AACA,QAAQ,mBAAmB,CAAC,UAAU,gBAAgB,EAAE;AACxD,YAAY,IAAI,OAAO,EAAE;AACzB,gBAAgB,gBAAgB,CAAC,SAAS,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;AACpG,aAAa;AACb;AACA,YAAY,gBAAgB,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;AAChD;AACA,YAAY,IAAI,CAAC,OAAO,EAAE;AAC1B,gBAAgB,gBAAgB,CAAC,SAAS,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;AACnG,aAAa;AACb,SAAS,CAAC,CAAC;AACX,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC;AAChB,CAAC,CAAC;AACF;AACA,OAAO,CAAC,mBAAmB,GAAG,YAAY;AAC1C,IAAI,CAAC,CAAC,2BAA2B,CAAC;AAClC,SAAS,IAAI,CAAC,SAAS,EAAE,eAAe,CAAC,aAAa,CAAC;AACvD,SAAS,MAAM,CAAC,YAAY;AAC5B,YAAY,MAAM,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AACnD;AACA,YAAYA,GAAS,CAAC,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC,CAAC;AACpD,YAAY,eAAe,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;AAChD,SAAS,CAAC,CAAC,MAAM,EAAE,CAAC;AACpB,CAAC,CAAC;AACF;AACA,OAAO,CAAC,gCAAgC,GAAG,YAAY;AACvD,IAAI,MAAM,MAAM,GAAGD,GAAS,CAAC,mBAAmB,CAAC,CAAC;AAClD,IAAI,IAAI,MAAM,CAAC,iBAAiB,EAAE;AAClC,QAAQ,CAAC,CAAC,0BAA0B,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;AACpE,KAAK;AACL,IAAI,CAAC,CAAC,0BAA0B,CAAC,CAAC,EAAE,CAAC,QAAQ,EAAE,YAAY;AAC3D,QAAQ,MAAM,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;AAC9C,QAAQC,GAAS,CAAC,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC,CAAC;AAChD,KAAK,CAAC,CAAC;AACP,CAAC,CAAC;AACF;AACA,OAAO,CAAC,wBAAwB,GAAG,WAAW;AAC9C,IAAI,MAAM,2BAA2B,GAAG,CAAC,CAAC,gCAAgC,CAAC,CAAC;AAC5E,IAAI,MAAM,MAAM,GAAGD,GAAS,CAAC,sBAAsB,CAAC,CAAC;AACrD,IAAI,2BAA2B;AAC/B,SAAS,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,MAAM,CAAC,oBAAoB,CAAC;AACvD,SAAS,EAAE,CAAC,QAAQ,EAAE,MAAM;AAC5B,YAAYC,GAAS,CAAC,EAAE,oBAAoB,EAAE,2BAA2B,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;AAC5F,YAAY,WAAW,CAAC,YAAY,EAAE,CAAC;AACvC,SAAS,CAAC,CAAC;AACX,CAAC,CAAC;AACF;AACA,OAAO,CAAC,mBAAmB,GAAG,WAAW;AACzC,IAAI,MAAM,sBAAsB,GAAG,CAAC,CAAC,2BAA2B,CAAC,CAAC;AAClE,IAAI,MAAM,MAAM,GAAGD,GAAS,CAAC,iBAAiB,CAAC,CAAC;AAChD,IAAI,sBAAsB;AAC1B,SAAS,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,MAAM,CAAC,eAAe,CAAC;AAClD,SAAS,EAAE,CAAC,QAAQ,EAAE,MAAM;AAC5B,YAAYC,GAAS,CAAC,EAAE,eAAe,EAAE,sBAAsB,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;AAClF,YAAY,WAAW,CAAC,YAAY,EAAE,CAAC;AACvC,SAAS,CAAC,CAAC;AACX,CAAC,CAAC;AACF;AACA,OAAO,CAAC,kBAAkB,GAAG,WAAW;AACxC,IAAI,MAAM,qBAAqB,GAAG,CAAC,CAAC,0BAA0B,CAAC,CAAC;AAChE,IAAI,MAAM,MAAM,GAAGD,GAAS,CAAC,gBAAgB,CAAC,CAAC;AAC/C,IAAI,qBAAqB;AACzB,SAAS,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC;AACjD,SAAS,EAAE,CAAC,QAAQ,EAAE,MAAM;AAC5B,YAAYC,GAAS,CAAC,EAAE,cAAc,EAAE,qBAAqB,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;AAChF,YAAY,WAAW,CAAC,YAAY,EAAE,CAAC;AACvC,SAAS,CAAC,CAAC;AACX,CAAC,CAAC;AACF;AACA,OAAO,CAAC,0BAA0B,GAAG,YAAY;AACjD,IAAI,IAAI,GAAG,CAAC,SAAS,EAAE,IAAI,SAAS,CAAC,WAAW,EAAE;AAClD,QAAQ,MAAM,MAAM,GAAGD,GAAS,CAAC,wBAAwB,CAAC,CAAC;AAC3D,QAAQ,IAAI,MAAM,CAAC,sBAAsB,EAAE;AAC3C,YAAY,CAAC,CAAC,kCAAkC,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AACxE,SAAS;AACT;AACA,QAAQ,CAAC,CAAC,kCAAkC,CAAC,CAAC,MAAM,CAAC,YAAY;AACjE,YAAY,MAAM,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AACnD;AACA,YAAYC,GAAS,CAAC,CAAC,wBAAwB,EAAE,OAAO,CAAC,CAAC,CAAC;AAC3D;AACA,YAAY,IAAI,OAAO,SAAS,CAAC,GAAG,KAAK,UAAU,EAAE;AACrD,gBAAgB,SAAS,CAAC,GAAG,EAAE,CAAC;AAChC,aAAa;AACb,SAAS,CAAC,CAAC;AACX,KAAK,MAAM;AACX,QAAQ,CAAC,CAAC,4BAA4B,CAAC,CAAC,IAAI,EAAE,CAAC;AAC/C,KAAK;AACL,CAAC,CAAC;AACF;AACA,OAAO,CAAC,aAAa,GAAG,YAAY;AACpC,IAAI,CAAC,CAAC,kBAAkB,CAAC;AACzB,SAAS,GAAG,CAAC,SAAS,CAAC,aAAa,CAAC;AACrC,SAAS,MAAM,CAAC,YAAY;AAC5B,YAAY,MAAM,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;AAClD;AACA,YAAYA,GAAS,CAAC,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC,CAAC;AAC5C,YAAY,YAAY,CAAC,KAAK,CAAC,CAAC;AAChC,SAAS,CAAC,CAAC,MAAM,EAAE,CAAC;AACpB,CAAC,CAAC;AACF;AACA,OAAO,CAAC,yBAAyB,GAAG,YAAY;AAChD,IAAI,IAAI,EAAE,YAAY,CAAC,YAAY,EAAE,IAAI,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE;AACxD,QAAQ,CAAC,CAAC,2BAA2B,CAAC,CAAC,IAAI,EAAE,CAAC;AAC9C,QAAQ,OAAO;AACf,KAAK;AACL,IAAI,MAAM,MAAM,GAAGD,GAAS,CAAC,uBAAuB,CAAC,CAAC;AACtD,IAAI,CAAC,CAAC,iCAAiC,CAAC;AACxC,SAAS,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC;AACxD,SAAS,MAAM,CAAC,YAAY,EAAEC,GAAS,CAAC,EAAE,qBAAqB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC;AAC9F,SAAS,MAAM,EAAE,CAAC;AAClB,CAAC,CAAC;AACF;AACA;AACA,IAAI,CAAC,OAAO,GAAG,OAAO;;;;"}