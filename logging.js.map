{"version":3,"file":"logging.js","sources":["../src/js/tabs/logging.js"],"sourcesContent":["import { millitime, bytesToSize, checkChromeRuntimeError } from '../utils/common.js';\nimport GUI, { TABS } from '../gui';\nimport { generateFilename } from '../utils/generate_filename.js';\nimport { i18n } from '../localization';\nimport { get as getConfig, set as setConfig } from '../ConfigStorage';\nimport FC from '../fc.js';\nimport MSP from '../msp.js';\nimport MSPCodes from '../msp/MSPCodes.js';\nimport CONFIGURATOR from '../data_storage.js';\nimport { gui_log } from '../gui_log.js';\nimport $ from 'jquery';\n\nconst logging = {};\nlogging.initialize = function (callback) {\n\n    if (GUI.active_tab != 'logging') {\n        GUI.active_tab = 'logging';\n    }\n\n    let requestedProperties = [];\n    let samples = 0;\n    let requests = 0;\n    let logBuffer = [];\n\n    if (CONFIGURATOR.connectionValid) {\n        const getMotorData = function () {\n            MSP.send_message(MSPCodes.MSP_MOTOR, false, false, loadHtml);\n        };\n\n        const loadHtml = function () {\n            $('#content').load(\"./tabs/logging.html\", process_html);\n        };\n\n        MSP.send_message(MSPCodes.MSP_RC, false, false, getMotorData);\n    }\n\n    function process_html() {\n        // translate to user-selected language\n        i18n.localizePage();\n\n        // UI hooks\n        $('a.log_file').click(prepare_file);\n\n        $('a.logging').click(function () {\n            if (GUI.connected_to) {\n                if (fileEntry != null) {\n                    const clicks = $(this).data('clicks');\n\n                    if (!clicks) {\n                        // reset some variables before start\n                        samples = 0;\n                        requests = 0;\n                        logBuffer = [];\n                        requestedProperties = [];\n\n                        $('.properties input:checked').each(function () {\n                            requestedProperties.push($(this).prop('name'));\n                        });\n\n                        if (requestedProperties.length) {\n                            // print header for the csv file\n                            print_head();\n\n                            const logDataPoll = function () {\n                                if (requests) {\n                                    // save current data (only after everything is initialized)\n                                    crunch_data();\n                                }\n\n                                // request new\n                                for (let i = 0; i < requestedProperties.length; i++, requests++) {\n                                    MSP.send_message(MSPCodes[requestedProperties[i]]);\n                                }\n                            };\n\n                            GUI.interval_add('log_data_poll', logDataPoll, parseInt($('select.speed').val()), true); // refresh rate goes here\n                            GUI.interval_add('write_data', function write_data() {\n                                if (logBuffer.length) { // only execute when there is actual data to write\n                                    if (fileWriter.readyState == 0 || fileWriter.readyState == 2) {\n                                        append_to_file(logBuffer.join('\\n'));\n\n                                        $('.samples').text(samples += logBuffer.length);\n\n                                        logBuffer = [];\n                                    } else {\n                                        console.log('IO having trouble keeping up with the data flow');\n                                    }\n                                }\n                            }, 1000);\n\n                            $('.speed').prop('disabled', true);\n                            $(this).text(i18n.getMessage('loggingStop'));\n                            $(this).data(\"clicks\", clicks !== true);\n                        } else {\n                            gui_log(i18n.getMessage('loggingErrorOneProperty'));\n                        }\n                    } else {\n                        GUI.interval_kill_all();\n\n                        $('.speed').prop('disabled', false);\n                        $(this).text(i18n.getMessage('loggingStart'));\n                        $(this).data(\"clicks\", !clicks);\n                    }\n                } else {\n                    gui_log(i18n.getMessage('loggingErrorLogFile'));\n                }\n            } else {\n                gui_log(i18n.getMessage('loggingErrorNotConnected'));\n            }\n        });\n\n        const result = getConfig('logging_file_entry');\n        if (result.logging_file_entry) {\n            chrome.fileSystem.restoreEntry(result.logging_file_entry, function (entry) {\n                if (checkChromeRuntimeError()) {\n                    return;\n                }\n\n                fileEntry = entry;\n                prepare_writer(true);\n            });\n        }\n\n        GUI.content_ready(callback);\n    }\n\n    function print_head() {\n        let head = \"timestamp\";\n\n        for (let i = 0; i < requestedProperties.length; i++) {\n            switch (requestedProperties[i]) {\n                case 'MSP_RAW_IMU':\n                    head += ',' + 'gyroscopeX';\n                    head += ',' + 'gyroscopeY';\n                    head += ',' + 'gyroscopeZ';\n\n                    head += ',' + 'accelerometerX';\n                    head += ',' + 'accelerometerY';\n                    head += ',' + 'accelerometerZ';\n\n                    head += ',' + 'magnetometerX';\n                    head += ',' + 'magnetometerY';\n                    head += ',' + 'magnetometerZ';\n                    break;\n                case 'MSP_ATTITUDE':\n                    head += ',' + 'kinematicsX';\n                    head += ',' + 'kinematicsY';\n                    head += ',' + 'kinematicsZ';\n                    break;\n                case 'MSP_ALTITUDE':\n                    head += ',' + 'altitude';\n                    break;\n                case 'MSP_RAW_GPS':\n                    head += ',' + 'gpsFix';\n                    head += ',' + 'gpsNumSat';\n                    head += ',' + 'gpsLat';\n                    head += ',' + 'gpsLon';\n                    head += ',' + 'gpsAlt';\n                    head += ',' + 'gpsSpeed';\n                    head += ',' + 'gpsGroundCourse';\n                    break;\n                case 'MSP_ANALOG':\n                    head += ',' + 'voltage';\n                    head += ',' + 'amperage';\n                    head += ',' + 'mAhdrawn';\n                    head += ',' + 'rssi';\n                    break;\n                case 'MSP_RC':\n                    for (let chan = 0; chan < FC.RC.active_channels; chan++) {\n                        head += `${',' + 'RC'}${chan}`;\n                    }\n                    break;\n                case 'MSP_MOTOR':\n                    for (let motor = 0; motor < FC.MOTOR_DATA.length; motor++) {\n                        head += `${',' + 'Motor'}${motor}`;\n                    }\n                    break;\n                case 'MSP_DEBUG':\n                    for (let debug = 0; debug < FC.SENSOR_DATA.debug.length; debug++) {\n                        head += `${',' + 'Debug'}${debug}`;\n                    }\n                    break;\n            }\n        }\n\n        append_to_file(head);\n    }\n\n    function crunch_data() {\n        let sample = millitime();\n\n        for (let i = 0; i < requestedProperties.length; i++) {\n            switch (requestedProperties[i]) {\n                case 'MSP_RAW_IMU':\n                    sample += `,${FC.SENSOR_DATA.gyroscope}`;\n                    sample += `,${FC.SENSOR_DATA.accelerometer}`;\n                    sample += `,${FC.SENSOR_DATA.magnetometer}`;\n                    break;\n                case 'MSP_ATTITUDE':\n                    sample += `,${FC.SENSOR_DATA.kinematics[0]}`;\n                    sample += `,${FC.SENSOR_DATA.kinematics[1]}`;\n                    sample += `,${FC.SENSOR_DATA.kinematics[2]}`;\n                    break;\n                case 'MSP_ALTITUDE':\n                    sample += `,${FC.SENSOR_DATA.altitude}`;\n                    break;\n                case 'MSP_RAW_GPS':\n                    sample += `,${FC.GPS_DATA.fix}`;\n                    sample += `,${FC.GPS_DATA.numSat}`;\n                    sample += `,${FC.GPS_DATA.lat / 10000000}`;\n                    sample += `,${FC.GPS_DATA.lon / 10000000}`;\n                    sample += `,${FC.GPS_DATA.alt}`;\n                    sample += `,${FC.GPS_DATA.speed}`;\n                    sample += `,${FC.GPS_DATA.ground_course}`;\n                    break;\n                case 'MSP_ANALOG':\n                    sample += `,${FC.ANALOG.voltage}`;\n                    sample += `,${FC.ANALOG.amperage}`;\n                    sample += `,${FC.ANALOG.mAhdrawn}`;\n                    sample += `,${FC.ANALOG.rssi}`;\n                    break;\n                case 'MSP_RC':\n                    for (let chan = 0; chan < FC.RC.active_channels; chan++) {\n                        sample += `,${FC.RC.channels[chan]}`;\n                    }\n                    break;\n                case 'MSP_MOTOR':\n                    sample += `,${FC.MOTOR_DATA}`;\n                    break;\n                case 'MSP_DEBUG':\n                    sample += `,${FC.SENSOR_DATA.debug}`;\n                    break;\n            }\n        }\n\n        logBuffer.push(sample);\n    }\n\n\n    // IO related methods\n    let fileEntry = null;\n    let fileWriter = null;\n\n    function prepare_file() {\n        const prefix = 'log';\n        const suffix = 'csv';\n\n        const filename = generateFilename(prefix, suffix);\n\n        const accepts = [{\n            description: `${suffix.toUpperCase()} files`, extensions: [suffix],\n        }];\n\n        // create or load the file\n        chrome.fileSystem.chooseEntry({type: 'saveFile', suggestedName: filename, accepts: accepts}, function(entry) {\n            if (checkChromeRuntimeError()) {\n                return;\n            }\n\n            fileEntry = entry;\n\n            // echo/console log path specified\n            chrome.fileSystem.getDisplayPath(fileEntry, function(path) {\n                console.log(`Log file path: ${path}`);\n            });\n\n            // change file entry from read only to read/write\n            chrome.fileSystem.getWritableEntry(fileEntry, function(fileEntryWritable) {\n                // check if file is writable\n                chrome.fileSystem.isWritableEntry(fileEntryWritable, function(isWritable) {\n                    if (isWritable) {\n                        fileEntry = fileEntryWritable;\n\n                        // save entry for next use\n                        setConfig({'logging_file_entry': chrome.fileSystem.retainEntry(fileEntry)});\n\n                        // reset sample counter in UI\n                        $('.samples').text(0);\n\n                        prepare_writer();\n                    } else {\n                        console.log('File appears to be read only, sorry.');\n                    }\n                });\n            });\n        });\n    }\n\n    function prepare_writer(retaining) {\n        fileEntry.createWriter(function (writer) {\n            fileWriter = writer;\n\n            fileWriter.onerror = function (e) {\n                console.error(e);\n\n                // stop logging if the procedure was/is still running\n                if ($('a.logging').data('clicks')) $('a.logging').click();\n            };\n\n            fileWriter.onwriteend = function () {\n                $('.size').text(bytesToSize(fileWriter.length));\n            };\n\n            if (retaining) {\n                chrome.fileSystem.getDisplayPath(fileEntry, function (path) {\n                    gui_log(i18n.getMessage('loggingAutomaticallyRetained', [path]));\n                });\n            }\n\n            // update log size in UI on fileWriter creation\n            $('.size').text(bytesToSize(fileWriter.length));\n            // update log name in UI\n            chrome.fileSystem.getDisplayPath(fileEntry, function (path) {\n               $('.name').text(path);\n            });\n\n        }, function (e) {\n            // File is not readable or does not exist!\n            console.error(e);\n\n            if (retaining) {\n                fileEntry = null;\n            }\n        });\n    }\n\n    function append_to_file(data) {\n        if (fileWriter.position < fileWriter.length) {\n            fileWriter.seek(fileWriter.length);\n        }\n\n        fileWriter.write(new Blob([`${data}\\n`], {type: 'text/plain'}));\n    }\n};\n\nlogging.cleanup = function (callback) {\n    if (callback) callback();\n};\n\n// TODO: only for transition to modules, drop this eventually\nTABS.logging = logging;\n\nexport {\n    logging,\n};\n"],"names":["getConfig","setConfig"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYK,MAAC,OAAO,GAAG,GAAG;AACnB,OAAO,CAAC,UAAU,GAAG,UAAU,QAAQ,EAAE;AACzC;AACA,IAAI,IAAI,GAAG,CAAC,UAAU,IAAI,SAAS,EAAE;AACrC,QAAQ,GAAG,CAAC,UAAU,GAAG,SAAS,CAAC;AACnC,KAAK;AACL;AACA,IAAI,IAAI,mBAAmB,GAAG,EAAE,CAAC;AACjC,IAAI,IAAI,OAAO,GAAG,CAAC,CAAC;AACpB,IAAI,IAAI,QAAQ,GAAG,CAAC,CAAC;AACrB,IAAI,IAAI,SAAS,GAAG,EAAE,CAAC;AACvB;AACA,IAAI,IAAI,YAAY,CAAC,eAAe,EAAE;AACtC,QAAQ,MAAM,YAAY,GAAG,YAAY;AACzC,YAAY,GAAG,CAAC,YAAY,CAAC,QAAQ,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;AACzE,SAAS,CAAC;AACV;AACA,QAAQ,MAAM,QAAQ,GAAG,YAAY;AACrC,YAAY,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,YAAY,CAAC,CAAC;AACpE,SAAS,CAAC;AACV;AACA,QAAQ,GAAG,CAAC,YAAY,CAAC,QAAQ,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,YAAY,CAAC,CAAC;AACtE,KAAK;AACL;AACA,IAAI,SAAS,YAAY,GAAG;AAC5B;AACA,QAAQ,IAAI,CAAC,YAAY,EAAE,CAAC;AAC5B;AACA;AACA,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;AAC5C;AACA,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,YAAY;AACzC,YAAY,IAAI,GAAG,CAAC,YAAY,EAAE;AAClC,gBAAgB,IAAI,SAAS,IAAI,IAAI,EAAE;AACvC,oBAAoB,MAAM,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAC1D;AACA,oBAAoB,IAAI,CAAC,MAAM,EAAE;AACjC;AACA,wBAAwB,OAAO,GAAG,CAAC,CAAC;AACpC,wBAAwB,QAAQ,GAAG,CAAC,CAAC;AACrC,wBAAwB,SAAS,GAAG,EAAE,CAAC;AACvC,wBAAwB,mBAAmB,GAAG,EAAE,CAAC;AACjD;AACA,wBAAwB,CAAC,CAAC,2BAA2B,CAAC,CAAC,IAAI,CAAC,YAAY;AACxE,4BAA4B,mBAAmB,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;AAC3E,yBAAyB,CAAC,CAAC;AAC3B;AACA,wBAAwB,IAAI,mBAAmB,CAAC,MAAM,EAAE;AACxD;AACA,4BAA4B,UAAU,EAAE,CAAC;AACzC;AACA,4BAA4B,MAAM,WAAW,GAAG,YAAY;AAC5D,gCAAgC,IAAI,QAAQ,EAAE;AAC9C;AACA,oCAAoC,WAAW,EAAE,CAAC;AAClD,iCAAiC;AACjC;AACA;AACA,gCAAgC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,mBAAmB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,QAAQ,EAAE,EAAE;AACjG,oCAAoC,GAAG,CAAC,YAAY,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACvF,iCAAiC;AACjC,6BAA6B,CAAC;AAC9B;AACA,4BAA4B,GAAG,CAAC,YAAY,CAAC,eAAe,EAAE,WAAW,EAAE,QAAQ,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;AACpH,4BAA4B,GAAG,CAAC,YAAY,CAAC,YAAY,EAAE,SAAS,UAAU,GAAG;AACjF,gCAAgC,IAAI,SAAS,CAAC,MAAM,EAAE;AACtD,oCAAoC,IAAI,UAAU,CAAC,UAAU,IAAI,CAAC,IAAI,UAAU,CAAC,UAAU,IAAI,CAAC,EAAE;AAClG,wCAAwC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AAC7E;AACA,wCAAwC,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,OAAO,IAAI,SAAS,CAAC,MAAM,CAAC,CAAC;AACxF;AACA,wCAAwC,SAAS,GAAG,EAAE,CAAC;AACvD,qCAAqC,MAAM;AAC3C,wCAAwC,OAAO,CAAC,GAAG,CAAC,iDAAiD,CAAC,CAAC;AACvG,qCAAqC;AACrC,iCAAiC;AACjC,6BAA6B,EAAE,IAAI,CAAC,CAAC;AACrC;AACA,4BAA4B,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;AAC/D,4BAA4B,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC;AACzE,4BAA4B,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,KAAK,IAAI,CAAC,CAAC;AACpE,yBAAyB,MAAM;AAC/B,4BAA4B,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,yBAAyB,CAAC,CAAC,CAAC;AAChF,yBAAyB;AACzB,qBAAqB,MAAM;AAC3B,wBAAwB,GAAG,CAAC,iBAAiB,EAAE,CAAC;AAChD;AACA,wBAAwB,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;AAC5D,wBAAwB,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC,CAAC;AACtE,wBAAwB,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,CAAC;AACxD,qBAAqB;AACrB,iBAAiB,MAAM;AACvB,oBAAoB,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,qBAAqB,CAAC,CAAC,CAAC;AACpE,iBAAiB;AACjB,aAAa,MAAM;AACnB,gBAAgB,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,0BAA0B,CAAC,CAAC,CAAC;AACrE,aAAa;AACb,SAAS,CAAC,CAAC;AACX;AACA,QAAQ,MAAM,MAAM,GAAGA,GAAS,CAAC,oBAAoB,CAAC,CAAC;AACvD,QAAQ,IAAI,MAAM,CAAC,kBAAkB,EAAE;AACvC,YAAY,MAAM,CAAC,UAAU,CAAC,YAAY,CAAC,MAAM,CAAC,kBAAkB,EAAE,UAAU,KAAK,EAAE;AACvF,gBAAgB,IAAI,uBAAuB,EAAE,EAAE;AAC/C,oBAAoB,OAAO;AAC3B,iBAAiB;AACjB;AACA,gBAAgB,SAAS,GAAG,KAAK,CAAC;AAClC,gBAAgB,cAAc,CAAC,IAAI,CAAC,CAAC;AACrC,aAAa,CAAC,CAAC;AACf,SAAS;AACT;AACA,QAAQ,GAAG,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AACpC,KAAK;AACL;AACA,IAAI,SAAS,UAAU,GAAG;AAC1B,QAAQ,IAAI,IAAI,GAAG,WAAW,CAAC;AAC/B;AACA,QAAQ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,mBAAmB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC7D,YAAY,QAAQ,mBAAmB,CAAC,CAAC,CAAC;AAC1C,gBAAgB,KAAK,aAAa;AAClC,oBAAoB,IAAI,IAAI,GAAG,GAAG,YAAY,CAAC;AAC/C,oBAAoB,IAAI,IAAI,GAAG,GAAG,YAAY,CAAC;AAC/C,oBAAoB,IAAI,IAAI,GAAG,GAAG,YAAY,CAAC;AAC/C;AACA,oBAAoB,IAAI,IAAI,GAAG,GAAG,gBAAgB,CAAC;AACnD,oBAAoB,IAAI,IAAI,GAAG,GAAG,gBAAgB,CAAC;AACnD,oBAAoB,IAAI,IAAI,GAAG,GAAG,gBAAgB,CAAC;AACnD;AACA,oBAAoB,IAAI,IAAI,GAAG,GAAG,eAAe,CAAC;AAClD,oBAAoB,IAAI,IAAI,GAAG,GAAG,eAAe,CAAC;AAClD,oBAAoB,IAAI,IAAI,GAAG,GAAG,eAAe,CAAC;AAClD,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,cAAc;AACnC,oBAAoB,IAAI,IAAI,GAAG,GAAG,aAAa,CAAC;AAChD,oBAAoB,IAAI,IAAI,GAAG,GAAG,aAAa,CAAC;AAChD,oBAAoB,IAAI,IAAI,GAAG,GAAG,aAAa,CAAC;AAChD,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,cAAc;AACnC,oBAAoB,IAAI,IAAI,GAAG,GAAG,UAAU,CAAC;AAC7C,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,aAAa;AAClC,oBAAoB,IAAI,IAAI,GAAG,GAAG,QAAQ,CAAC;AAC3C,oBAAoB,IAAI,IAAI,GAAG,GAAG,WAAW,CAAC;AAC9C,oBAAoB,IAAI,IAAI,GAAG,GAAG,QAAQ,CAAC;AAC3C,oBAAoB,IAAI,IAAI,GAAG,GAAG,QAAQ,CAAC;AAC3C,oBAAoB,IAAI,IAAI,GAAG,GAAG,QAAQ,CAAC;AAC3C,oBAAoB,IAAI,IAAI,GAAG,GAAG,UAAU,CAAC;AAC7C,oBAAoB,IAAI,IAAI,GAAG,GAAG,iBAAiB,CAAC;AACpD,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,YAAY;AACjC,oBAAoB,IAAI,IAAI,GAAG,GAAG,SAAS,CAAC;AAC5C,oBAAoB,IAAI,IAAI,GAAG,GAAG,UAAU,CAAC;AAC7C,oBAAoB,IAAI,IAAI,GAAG,GAAG,UAAU,CAAC;AAC7C,oBAAoB,IAAI,IAAI,GAAG,GAAG,MAAM,CAAC;AACzC,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,QAAQ;AAC7B,oBAAoB,KAAK,IAAI,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,eAAe,EAAE,IAAI,EAAE,EAAE;AAC7E,wBAAwB,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;AACvD,qBAAqB;AACrB,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,WAAW;AAChC,oBAAoB,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,EAAE,CAAC,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;AAC/E,wBAAwB,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;AAC3D,qBAAqB;AACrB,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,WAAW;AAChC,oBAAoB,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;AACtF,wBAAwB,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;AAC3D,qBAAqB;AACrB,oBAAoB,MAAM;AAC1B,aAAa;AACb,SAAS;AACT;AACA,QAAQ,cAAc,CAAC,IAAI,CAAC,CAAC;AAC7B,KAAK;AACL;AACA,IAAI,SAAS,WAAW,GAAG;AAC3B,QAAQ,IAAI,MAAM,GAAG,SAAS,EAAE,CAAC;AACjC;AACA,QAAQ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,mBAAmB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC7D,YAAY,QAAQ,mBAAmB,CAAC,CAAC,CAAC;AAC1C,gBAAgB,KAAK,aAAa;AAClC,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC;AAC7D,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC,CAAC;AACjE,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC;AAChE,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,cAAc;AACnC,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjE,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjE,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjE,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,cAAc;AACnC,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC;AAC5D,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,aAAa;AAClC,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;AACpD,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;AACvD,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC,GAAG,GAAG,QAAQ,CAAC,CAAC,CAAC;AAC/D,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC,GAAG,GAAG,QAAQ,CAAC,CAAC,CAAC;AAC/D,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;AACpD,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;AACtD,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC;AAC9D,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,YAAY;AACjC,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;AACtD,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;AACvD,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;AACvD,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;AACnD,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,QAAQ;AAC7B,oBAAoB,KAAK,IAAI,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,eAAe,EAAE,IAAI,EAAE,EAAE;AAC7E,wBAAwB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAC7D,qBAAqB;AACrB,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,WAAW;AAChC,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;AAClD,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,WAAW;AAChC,oBAAoB,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;AACzD,oBAAoB,MAAM;AAC1B,aAAa;AACb,SAAS;AACT;AACA,QAAQ,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC/B,KAAK;AACL;AACA;AACA;AACA,IAAI,IAAI,SAAS,GAAG,IAAI,CAAC;AACzB,IAAI,IAAI,UAAU,GAAG,IAAI,CAAC;AAC1B;AACA,IAAI,SAAS,YAAY,GAAG;AAC5B,QAAQ,MAAM,MAAM,GAAG,KAAK,CAAC;AAC7B,QAAQ,MAAM,MAAM,GAAG,KAAK,CAAC;AAC7B;AACA,QAAQ,MAAM,QAAQ,GAAG,gBAAgB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;AAC1D;AACA,QAAQ,MAAM,OAAO,GAAG,CAAC;AACzB,YAAY,WAAW,EAAE,CAAC,EAAE,MAAM,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,EAAE,UAAU,EAAE,CAAC,MAAM,CAAC;AAC9E,SAAS,CAAC,CAAC;AACX;AACA;AACA,QAAQ,MAAM,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,UAAU,EAAE,aAAa,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC,EAAE,SAAS,KAAK,EAAE;AACrH,YAAY,IAAI,uBAAuB,EAAE,EAAE;AAC3C,gBAAgB,OAAO;AACvB,aAAa;AACb;AACA,YAAY,SAAS,GAAG,KAAK,CAAC;AAC9B;AACA;AACA,YAAY,MAAM,CAAC,UAAU,CAAC,cAAc,CAAC,SAAS,EAAE,SAAS,IAAI,EAAE;AACvE,gBAAgB,OAAO,CAAC,GAAG,CAAC,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;AACtD,aAAa,CAAC,CAAC;AACf;AACA;AACA,YAAY,MAAM,CAAC,UAAU,CAAC,gBAAgB,CAAC,SAAS,EAAE,SAAS,iBAAiB,EAAE;AACtF;AACA,gBAAgB,MAAM,CAAC,UAAU,CAAC,eAAe,CAAC,iBAAiB,EAAE,SAAS,UAAU,EAAE;AAC1F,oBAAoB,IAAI,UAAU,EAAE;AACpC,wBAAwB,SAAS,GAAG,iBAAiB,CAAC;AACtD;AACA;AACA,wBAAwBC,GAAS,CAAC,CAAC,oBAAoB,EAAE,MAAM,CAAC,UAAU,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AACpG;AACA;AACA,wBAAwB,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAC9C;AACA,wBAAwB,cAAc,EAAE,CAAC;AACzC,qBAAqB,MAAM;AAC3B,wBAAwB,OAAO,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAC;AAC5E,qBAAqB;AACrB,iBAAiB,CAAC,CAAC;AACnB,aAAa,CAAC,CAAC;AACf,SAAS,CAAC,CAAC;AACX,KAAK;AACL;AACA,IAAI,SAAS,cAAc,CAAC,SAAS,EAAE;AACvC,QAAQ,SAAS,CAAC,YAAY,CAAC,UAAU,MAAM,EAAE;AACjD,YAAY,UAAU,GAAG,MAAM,CAAC;AAChC;AACA,YAAY,UAAU,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE;AAC9C,gBAAgB,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACjC;AACA;AACA,gBAAgB,IAAI,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,KAAK,EAAE,CAAC;AAC1E,aAAa,CAAC;AACd;AACA,YAAY,UAAU,CAAC,UAAU,GAAG,YAAY;AAChD,gBAAgB,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;AAChE,aAAa,CAAC;AACd;AACA,YAAY,IAAI,SAAS,EAAE;AAC3B,gBAAgB,MAAM,CAAC,UAAU,CAAC,cAAc,CAAC,SAAS,EAAE,UAAU,IAAI,EAAE;AAC5E,oBAAoB,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,8BAA8B,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACrF,iBAAiB,CAAC,CAAC;AACnB,aAAa;AACb;AACA;AACA,YAAY,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;AAC5D;AACA,YAAY,MAAM,CAAC,UAAU,CAAC,cAAc,CAAC,SAAS,EAAE,UAAU,IAAI,EAAE;AACxE,eAAe,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACrC,aAAa,CAAC,CAAC;AACf;AACA,SAAS,EAAE,UAAU,CAAC,EAAE;AACxB;AACA,YAAY,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAC7B;AACA,YAAY,IAAI,SAAS,EAAE;AAC3B,gBAAgB,SAAS,GAAG,IAAI,CAAC;AACjC,aAAa;AACb,SAAS,CAAC,CAAC;AACX,KAAK;AACL;AACA,IAAI,SAAS,cAAc,CAAC,IAAI,EAAE;AAClC,QAAQ,IAAI,UAAU,CAAC,QAAQ,GAAG,UAAU,CAAC,MAAM,EAAE;AACrD,YAAY,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;AAC/C,SAAS;AACT;AACA,QAAQ,UAAU,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC;AACxE,KAAK;AACL,CAAC,CAAC;AACF;AACA,OAAO,CAAC,OAAO,GAAG,UAAU,QAAQ,EAAE;AACtC,IAAI,IAAI,QAAQ,EAAE,QAAQ,EAAE,CAAC;AAC7B,CAAC,CAAC;AACF;AACA;AACA,IAAI,CAAC,OAAO,GAAG,OAAO;;;;"}