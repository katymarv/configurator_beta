{"version":3,"file":"landing.js","sources":["../src/js/tabs/landing.js"],"sourcesContent":["import GUI, { TABS } from '../gui';\nimport { i18n } from '../localization';\nimport Sponsor from '../Sponsor';\nimport $ from 'jquery';\n\nconst landing = {\n    sponsor: new Sponsor(),\n};\n\nlanding.initialize = function (callback) {\n    const self = this;\n\n    if (GUI.active_tab != 'landing') {\n        GUI.active_tab = 'landing';\n    }\n\n    $('#content').load(\"./tabs/landing.html\", () => {\n        function showLang(newLang) {\n            bottomSection = $('.languageSwitcher');\n            bottomSection.find('a').each(function(index) {\n                const element = $(this);\n                const languageSelected = element.attr('lang');\n                if (newLang == languageSelected) {\n                    element.removeClass('selected_language');\n                    element.addClass('selected_language');\n                } else {\n                    element.removeClass('selected_language');\n                }\n            });\n        }\n\n        let bottomSection = $('.languageSwitcher');\n        bottomSection.html(' <span i18n=\"language_choice_message\"></span>');\n        bottomSection.append(' <a href=\"#\" i18n=\"language_default_pretty\" lang=\"DEFAULT\"></a>');\n        const languagesAvailables = i18n.getLanguagesAvailables();\n\n        languagesAvailables.forEach((element) => {\n            bottomSection.append(` <a href=\"#\" lang=\"${element}\" i18n=\"language_${element}\"></a>`);\n        });\n\n        bottomSection.find('a').each((index, element) => {\n            $(element).click(() => {\n                const languageSelected = $(element).attr('lang');\n                if (!languageSelected) { return; }\n                if (i18n.selectedLanguage != languageSelected) {\n                    i18n.changeLanguage(languageSelected);\n                    showLang(languageSelected);\n                }\n            });\n        });\n\n        showLang(i18n.selectedLanguage);\n        // translate to user-selected language\n        i18n.localizePage();\n\n        self.sponsor.loadSponsorTile('landing', $('div.tab_sponsor'));\n\n        GUI.content_ready(callback);\n    });\n};\n\nlanding.cleanup = function (callback) {\n    if (callback) {\n        callback();\n    }\n};\n\n// TODO: remove after all is using modules\nTABS.landing = landing;\nexport {\n    landing,\n};\n"],"names":[],"mappings":"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"}